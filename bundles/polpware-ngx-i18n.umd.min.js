!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("@angular/common")):"function"==typeof define&&define.amd?define("@polpware/ngx-i18n",["exports","@angular/core","rxjs","@angular/common"],t):t(((e=e||self).polpware=e.polpware||{},e.polpware["ngx-i18n"]={}),e.ng.core,e.rxjs,e.ng.common)}(this,(function(e,t,n,r){"use strict";function a(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!=e&&t!=t)return!0;var n,r,i,o=typeof e;if(o==typeof t&&"object"==o){if(!Array.isArray(e)){if(Array.isArray(t))return!1;for(r in i=Object.create(null),e){if(!a(e[r],t[r]))return!1;i[r]=!0}for(r in t)if(!(r in i)&&void 0!==t[r])return!1;return!0}if(!Array.isArray(t))return!1;if((n=e.length)==t.length){for(r=0;r<n;r++)if(!a(e[r],t[r]))return!1;return!0}}return!1}function i(e){return null!=e}function o(e,t,n){var r=[];r=(r="string"==typeof t?t.split("."):t).filter((function(e){return e}));for(var a=e,i=0;i<r.length;i++){var o=r[i];if(!a[o]){a=void 0;break}a=a[o]}var s,u=void 0;return void 0!==a&&"string"==typeof a&&(u=a,n&&(s=n,u=a.replace(/\{\{([a-zA-Z]+)\}\}/g,(function(e,t){return void 0===s[t]?"":s[t]})))),void 0!==u?u:r.join(".")}var s=function(){function e(){this._dict={},this.onTranslationChange=new t.EventEmitter,this.onLangChange=new t.EventEmitter,this.onDefaultLangChange=new t.EventEmitter,this.defaultLang="",this.currentLang="",this.langs=[]}return e.prototype.getParsedResult=function(e,t,n){return t},e.prototype.get=function(e,t){var r=o(this._dict,e,t);return n.of(r)},e.prototype.loadResources=function(e){Object.assign(this._dict,e)},e}(),u=function(){function e(e,t){this.translate=e,this._ref=t,this.value="",this.lastKey=null,this.lastParams=[]}return e.prototype.updateValue=function(e,t,r){var a=this,i=function(t){a.value=void 0!==t?t:e,a.lastKey=e,a._ref.markForCheck()};if(r){var o=this.translate.getParsedResult(r,e,t);n.isObservable(o.subscribe)?o.subscribe(i):i(o)}this.translate.get(e,t).subscribe(i)},e.prototype.transform=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!e||!e.length)return e;if(a(e,this.lastKey)&&a(n,this.lastParams))return this.value;var s=void 0;if(i(n[0])&&n.length)if("string"==typeof n[0]&&n[0].length){var u=n[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{s=JSON.parse(u)}catch(e){throw new SyntaxError("Wrong parameter in TranslatePipe. Expected a valid Object, received: "+n[0])}}else"object"!=typeof n[0]||Array.isArray(n[0])||(s=n[0]);if(this.lastKey=e,this.lastParams=n,this.updateValue(e,s),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe((function(n){t.lastKey&&n.lang===t.translate.currentLang&&(t.lastKey=null,t.updateValue(e,s,n.translations))}))),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe((function(n){t.lastKey&&(t.lastKey=null,t.updateValue(e,s,n.translations))}))),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe((function(){t.lastKey&&(t.lastKey=null,t.updateValue(e,s))}))),this.value==e&&n.length>3&&i(n[2])&&"object"==typeof n[2]){var l=n[2],f=o(l,e,s);f&&(this.value=f)}return this.value},e.prototype._dispose=function(){void 0!==this.onTranslationChange&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),void 0!==this.onLangChange&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),void 0!==this.onDefaultLangChange&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)},e.prototype.ngOnDestroy=function(){this._dispose()},e.ɵfac=function(n){return new(n||e)(t.ɵɵdirectiveInject(s),t.ɵɵinjectPipeChangeDetectorRef())},e.ɵpipe=t.ɵɵdefinePipe({name:"hyperTrans",type:e,pure:!1}),e.ɵprov=t.ɵɵdefineInjectable({token:e,factory:e.ɵfac}),e}(),l=function(){function e(){}return e.ɵmod=t.ɵɵdefineNgModule({type:e}),e.ɵinj=t.ɵɵdefineInjector({factory:function(t){return new(t||e)},imports:[[r.CommonModule]]}),e}();("undefined"==typeof ngJitMode||ngJitMode)&&t.ɵɵsetNgModuleScope(l,{declarations:[u],imports:[r.CommonModule],exports:[u]}),e.HyperTranslatePipe=u,e.NgxI18nModule=l,e.NgxTranslatorImplService=s,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=polpware-ngx-i18n.umd.min.js.map